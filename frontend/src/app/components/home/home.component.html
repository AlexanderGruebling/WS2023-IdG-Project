<div class="jumbotron mt-5">
  <h1 *ngIf="!authService.isLoggedIn()" class="display-4">Welcome to MediTrack!</h1>
  <h1 *ngIf="authService.isLoggedIn()" class="display-4">Welcome back, {{profile.username}}!</h1>
  <hr class="my-4">
  <a *ngIf="!authService.isLoggedIn()" class="btn btn-primary btn-lg" routerLink="/login" role="button">Login</a>
  <div *ngIf="authService.isLoggedIn()" class="d-flex flex-column justify-content-center">
    <div class="d-flex flex-wrap justify-content-center">
      <app-main-button title="Track your Meds"
                       refersTo="add-entry"
                       buttonIcon="pencil"
                       class="col-lg-3 m-2">
      </app-main-button>
      <app-main-button title="Calendar"
                       refersTo="calendar"
                       buttonIcon="calendar-date"
                       class="col-lg-3 m-2">
      </app-main-button>
      <app-main-button title="Stats & Insights"
                       refersTo="stats"
                       buttonIcon="bar-chart"
                       class="col-lg-3 m-2">
      </app-main-button>
    </div>
    <h2 *ngIf="entries.length > 0" class="h4 mt-2">Your recent entries:</h2>
    <div *ngIf="entries.length > 0" class="accordion mt-1" id="medications">
      <div class="accordion-item" *ngFor="let entry of entries; let i = index">
        <div class="accordion-header">
          <button class="accordion-button"
                  type="button" data-bs-toggle="collapse"
                  [attr.data-bs-target]="'#collapse' + i"
                  aria-expanded="true"
                  [attr.aria-controls]="'collapse' + i">
            <div class="flex-container">
              <div class="right-edge">{{ this.formatDate(entry.date) }}</div>
              <div class="left-edge">{{ this.medsToString(entry.medIds) }}</div>
            </div>

          </button>
        </div>
        <div id="collapse{{i}}" class="accordion-collapse collapse" data-bs-parent="#medications">
          <div class="accordion-body">
            <div>
              <ul>
                <li><strong>Meds:</strong> {{ this.medsToString(entry.medIds) }}</li>
                <li><strong>Symptoms:</strong> {{ this.effectsToString(entry.effects)}} </li>
              </ul>

            </div>
            <div class="flex space-between">
              <button type="button"
                      class="btn btn-sm btn-outline-secondary"
                      (click)="this.deleteEntry(entry.entryId);"
              >
                <i class="bi-pencil"></i>
                Edit
              </button>
              <button type="button"
                      class="btn btn-sm btn-outline-danger"
                      (click)="this.deleteEntry(entry.entryId);"
              >
                <i class="bi-trash"></i>
                Delete
              </button>

            </div>
          </div>
        </div>
      </div>
      <div class="center-container">
        <button *ngIf="authService.isLoggedIn()" routerLink="/entries"
                type="button" class="btn btn-secondary" id="showAllEntriesButton">
          Show all entries
        </button>
      </div>
  </div>
</div>
</div>
